<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <!-- <script type="text/javascript" src = "/static/main.js"></script> -->
    <!-- <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script> -->
<script type="text/javascript" charset="utf-8">
</script>
    <style media="screen">
    h1{color: red;}
      .upper{
        color: red;
        background-color: black;
      }
      /* input{background-color:lightblue} */
    </style>
    <title>{{ username }}</title>
  </head>
  <body>
    <!-- <center><i>
    <h1>INDIAN INSTITUTE OF TECHNOLOGY,MANDI</h1>
    <h4>-Here you can find everything</h4>
  </center></i>
  <!  -->
    <!-- <div class="upper">

      <form method="POST" action="{{url_for('sign')}}">
  		<button style="float:right">SIGNUP</button>
  	</form>
    </div> -->
   <!-- <div class="footer"> -->
<!-- <center>footer</center> -->
   <!-- </div> -->
   <style media="screen">
     /* .message_holder{
       background-color:black;
       width:50vw;
       /* marg:20vw; */
     /* } */
   </style>
   <div style="background-color:black;width: 100%;height: 5vw;">
     <br>

     <button style="float:right">LOGOUT</button>


     <!-- <button style="float:right">SIGNIN</button> -->

     <!-- <i><center><span style="color: red;font-size: 3.5vw">KNOW & CURE your disease here</span></center></i>
     <i><center><span style="color: orange;font-size: 2vw">- beacause we care</span></center></i> -->
   </div>

     <center><h3 style='color: #ccc;font-size: 30px;'>No message yet..</h3></center>
     <div style="text-align: left;">
    <div class="message_holder" style="width: 650px; margin: 0 auto; background: blue; color: #fff;"></div>
   <div class="online" style="float: right;width: 150px; margin: 0 auto; background: black; color: white;"></div>
     </div>
   <center>
     <form style="" action="" method="POST">
       <!-- <input type="text" class="username" placeholder="User Name"/> -->
       <input type="text" class="message" placeholder="Messages"/>
       <input type="submit"/>
     </form>
   </center>
     <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script>
     <script type="text/javascript">
       var socket = io.connect('http://' + document.domain + ':' + location.port);

       socket.emit('online_doctor');
       socket.on( 'online_doctor', function(data) {
          // alert(data['name'])
          $( 'div.online' ).append( '<div><b style="color: red">'+data['name']+" specilist"+'</div>' )
          console.log(data);
       })

       socket.on( 'connect', function() {
         socket.emit( 'my event', {
           data: 'User Connected'
         } )
         var form = $( 'form' ).on( 'submit', function( e ) {
           e.preventDefault()
           // let user_name = $( 'input.username' ).val()
           let user_input = $( 'input.message' ).val()
           socket.emit( 'my event', {
             user_name : "***"+{{ username }},
             message : user_input
           } )
           $( 'input.message' ).val( '' ).focus()
         } )
       } )
       socket.on( 'my response', function( msg ) {
         console.log( msg )
         if( typeof msg.user_name !== 'undefined' ) {
           $( 'h3' ).remove()
           $( 'div.message_holder' ).append( '<div><b style="color: #000">'+msg.user_name+'</b> '+msg.message+'</div>' )
         }
       })
     </script>

  </body>
</html>
